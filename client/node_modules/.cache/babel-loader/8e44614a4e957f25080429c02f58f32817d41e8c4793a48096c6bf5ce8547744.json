{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios,{Axios}from\"axios\";import{useNavigate}from'react-router-dom';import styles from\"../CSSModule/Dashboard.module.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(_ref){let{setDisplay}=_ref;const[appliedOppurtunites,setAppliedOppurtunities]=useState([]);const navigate=useNavigate();useEffect(()=>{axios.get(\"http://localhost:3000/auth/verify\").then(res=>{if(!res.data.status){setDisplay(()=>({profile:false}));navigate(\"/login\");}else{setDisplay(()=>({profile:true}));fetchAppliedOppurtunities();}});},[navigate]);const fetchAppliedOppurtunities=async()=>{try{const response=await axios.get(\"http://localhost:3000/auth/applied-oppurtunities\");setAppliedOppurtunities(response.data);}catch(error){}};const handleLogout=()=>{axios.get(\"http://localhost:3000/auth/logout\").then(res=>{if(res.data.status){setDisplay(()=>({profile:false}));navigate(\"/login\");}}).catch(err=>{console.log(err);});};function handleCancel(index){try{const opportuniteToDelete=appliedOppurtunites[index];axios.delete(\"http://localhost:3000/auth/applied-oppurtunities\",{data:{id:opportuniteToDelete._id}}).catch(err=>{console.log(err);});const newOpportunities=appliedOppurtunites.filter((_,idx)=>idx!==index);setAppliedOppurtunities(newOpportunities);}catch(error){console.error('Error deleting opportunity:',error);}}return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:styles.logoutButton,children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Applied Oppurtunities\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.opportunitiesContainer,children:appliedOppurtunites.map((oppurtunity,index)=>/*#__PURE__*/_jsxs(\"div\",{className:styles.opportunityCard,children:[/*#__PURE__*/_jsx(\"h1\",{children:oppurtunity.profile_name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Company: \"}),\" \",oppurtunity.company_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Stipend: \"}),\" \",oppurtunity.stipend]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duration: \"}),\" \",oppurtunity.duration]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancel(index),className:styles.cancelButton,children:\"Click to cancel\"})]},index))})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","Axios","useNavigate","styles","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","setDisplay","appliedOppurtunites","setAppliedOppurtunities","navigate","get","then","res","data","status","profile","fetchAppliedOppurtunities","response","error","handleLogout","catch","err","console","log","handleCancel","index","opportuniteToDelete","delete","id","_id","newOpportunities","filter","_","idx","className","container","children","header","onClick","logoutButton","opportunitiesContainer","map","oppurtunity","opportunityCard","profile_name","company_name","stipend","duration","cancelButton"],"sources":["/Users/rishavchoudhary/Documents/GitHub/internship/server/client/src/Components/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios, { Axios } from \"axios\"\nimport { useNavigate } from 'react-router-dom'\nimport styles from \"../CSSModule/Dashboard.module.css\"\nexport default function Dashboard({ setDisplay }) {\n    const [appliedOppurtunites, setAppliedOppurtunities] = useState([])\n    const navigate = useNavigate()\n    useEffect(() => {\n        axios.get(\"http://localhost:3000/auth/verify\").then((res) => {\n            if (!res.data.status) {\n                setDisplay(() => ({ profile: false }))\n                navigate(\"/login\")\n            } else {\n                setDisplay(() => ({ profile: true }))\n                fetchAppliedOppurtunities()\n            }\n        })\n    }, [navigate])\n    const fetchAppliedOppurtunities = async () => {\n        try {\n            const response = await axios.get(\"http://localhost:3000/auth/applied-oppurtunities\")\n            setAppliedOppurtunities(response.data)\n        } catch (error) {\n\n        }\n    }\n    const handleLogout = () => {\n        axios.get(\"http://localhost:3000/auth/logout\")\n            .then((res) => {\n                if (res.data.status) {\n                    setDisplay(() => ({ profile: false }))\n                    navigate(\"/login\")\n                }\n            }).catch((err) => {\n                console.log(err)\n            })\n    }\n    function handleCancel(index) {\n        try {\n            const opportuniteToDelete = appliedOppurtunites[index]\n            axios.delete(\"http://localhost:3000/auth/applied-oppurtunities\", {\n                data: { id: opportuniteToDelete._id }\n            }).catch((err)=> {\n                console.log(err)\n            })\n            const newOpportunities = appliedOppurtunites.filter((_, idx) => idx !== index);\n            setAppliedOppurtunities(newOpportunities);\n        }\n        catch (error) {\n            console.error('Error deleting opportunity:', error);\n        }\n    }\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <h1>Dashboard</h1>\n                <button onClick={handleLogout} className={styles.logoutButton}>Logout</button>\n            </div>\n            <h2>Applied Oppurtunities</h2>\n            <div className={styles.opportunitiesContainer}>\n                {appliedOppurtunites.map((oppurtunity, index) => (\n                    <div key={index} className={styles.opportunityCard}>\n                        <h1>{oppurtunity.profile_name}</h1>\n                        <p><strong>Company: </strong> {oppurtunity.company_name}</p>\n                        <p><strong>Stipend: </strong> {oppurtunity.stipend}</p>\n                        <p><strong>Duration: </strong> {oppurtunity.duration}</p>\n                        <button onClick={() => handleCancel(index) }className={styles.cancelButton}>Click to cancel</button>\n                    </div>\n                ))}\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}